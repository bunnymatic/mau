// Generated by CoffeeScript 1.12.7
(function() {
  var MAU, OsKeyGenerator,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  MAU = window.MAU = window.MAU || {};

  MAU.OsKeyGenerator = OsKeyGenerator = (function() {
    OsKeyGenerator.prototype.updateKey = function(ev) {
      var key, startDate;
      startDate = moment(new Date(this.startDate.val()));
      if (startDate.isValid()) {
        key = startDate.format('YYYYMM');
        return this.key.val(key);
      }
    };

    function OsKeyGenerator(element, opts) {
      this.updateKey = bind(this.updateKey, this);
      this.element = $(element);
      this.opts = _.extend({}, {
        start_date_field: '#open_studios_event_start_date',
        end_date_field: '#open_studios_event_start_date',
        key_field: '#open_studios_event_key'
      }, opts);
      this.startDate = this.element.find(this.opts.start_date_field);
      this.endDate = this.element.find(this.opts.end_date_field);
      this.key = this.element.find(this.opts.key_field);
      this.startDate.on('change', this.updateKey);
      this.endDate.on('change', this.updateKey);
      this.updateKey();
    }

    return OsKeyGenerator;

  })();

}).call(this);
