// Generated by CoffeeScript 1.12.7
(function() {
  $(function() {
    var $artPieceForm;
    $artPieceForm = jQuery('.art_piece.formtastic');
    if ($artPieceForm.length) {
      $('#art_piece_medium_id').selectize();
      $('input[type=submit]').on('click', function() {
        var spinner;
        if (/add/i.test($(this).val())) {
          spinner = new MAU.Spinner();
          return spinner.spin();
        }
      });
      return $('#art_piece_tag_ids').selectize({
        delimiter: ',',
        persist: false,
        sortField: 'text',
        create: function(input) {
          return {
            value: input,
            text: input
          };
        },
        render: function(data, escape) {
          return data;
        },
        load: function(query, callback) {
          if (query.length < 3) {
            callback();
          }
          return $.ajax({
            url: '/art_piece_tags/autosuggest',
            type: 'post',
            dataType: "json",
            data: {
              q: query
            },
            error: function() {
              return callback();
            },
            success: function(results) {
              return callback(_.map(results, function(result) {
                return {
                  value: result,
                  text: result
                };
              }));
            }
          });
        }
      });
    }
  });

}).call(this);
