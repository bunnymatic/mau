// Generated by CoffeeScript 1.12.7
(function() {
  var MAU;

  MAU = window.MAU = window.MAU || {};

  MAU.Utils = {
    ellipsize: function(str, max, ellipse, chars, truncate) {
      var DEFAULTS, c, i, last, len, ref;
      DEFAULTS = {
        ellipse: 'â€¦',
        chars: [' ', '-'],
        max: 140,
        truncate: true
      };
      max || (max = DEFAULTS.max);
      chars || (chars = DEFAULTS.chars);
      ellipse || (ellipse = DEFAULTS.ellipse);
      truncate || (truncate = DEFAULTS.truncate);
      last = 0;
      c = '';
      if (str.length < max) {
        return str;
      }
      i = 0;
      len = str.length;
      while (i < len) {
        c = str.charAt(i);
        i++;
        if (chars.indexOf(c) !== -1) {
          last = i;
          if (i < max) {
            continue;
          }
          if (last === 0) {
            return (ref = !truncate) != null ? ref : {
              '': str.substring(0, max - 1) + ellipse
            };
          }
          return str.substring(0, last) + ellipse;
        }
      }
      return str;
    },
    debounce: function(func, threshold, execAsap) {
      var timeout;
      timeout = null;
      return function() {
        var args, delayed, obj;
        obj = this;
        args = arguments;
        delayed = function() {
          if (!execAsap) {
            func.apply(obj, args);
          }
          return timeout = null;
        };
        if (timeout) {
          clearTimeout(timeout);
        } else if (execAsap) {
          func.apply(obj, args);
        }
        return timeout = setTimeout(delayed, threshold || 100);
      };
    },
    validateEmail: function(str) {
      return (str.indexOf(".") > 2) && (str.indexOf("@") > 0);
    },
    getSize: function(el) {
      return {
        width: el.offsetWidth,
        height: el.offsetHeight
      };
    },
    getPosition: function(el) {
      var xx, yy;
      xx = yy = 0;
      while (el) {
        xx += element.offsetLeft - element.scrollLeft + element.clientLeft;
        xx += element.offsetTop - element.scrollTop + element.clientTop;
        el = element.offsetParent;
      }
      return {
        x: xx,
        y: yy
      };
    },
    createElement: function(tagName, attrs) {
      el;
      var el, k, v;
      if (document && document.createElement) {
        el = document.createElement(tagName);
        for (k in attrs) {
          v = attrs[k];
          el.setAttribute(k, v);
        }
      }
      return el;
    },
    post_to_url: function(path, params, method) {
      var form, hiddenField, key, val;
      method = method || "post";
      form = this.createElement('form', {
        method: method,
        action: path
      });
      hiddenField = null;
      for (key in params) {
        val = params[key];
        hiddenField = this.createElement('input', {
          type: 'hidden',
          name: key,
          value: val
        });
        form.appendChild(hiddenField);
      }
      hiddenField = this.createElement('input', {
        type: 'hidden',
        name: 'authenticity_token',
        value: unescape(authenticityToken)
      });
      form.appendChild(hiddenField);
      document.body.appendChild(form);
      return form.submit();
    }
  };

}).call(this);
