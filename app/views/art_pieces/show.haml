- artist = @art_piece.artist
.thumbnailApp{ "ng-app" => "ArtPiecesApp", "ng-controller" => "artPiecesController", 'ng-init' => "init(#{@art_piece.angular_config})" }
  .js-hidden.js-data{"data-artist_id" => artist.id, "data-art_piece_id" => @art_piece.id}

  %table.tbl-content
    %tr
      %td.lcol{:colspan => 2}
        = render "sidebar_info", :artist => artist
        = render "/art_pieces/thumb_browser", :browser => @thumb_browser
      %td.vstripe
      %td.rcol{:colspan => 2}
        .logo-spacer
        = render :partial => '/flash_notice_error'
        #artpiece_title {{currentArtPiece.title}}
        #artpiece_container
          .artpiece_wrapper
            %img#artpiece_img{'ng-src' => '{{currentArtPiece.image_files.medium}}'}
            #social_panel
              .social_buttons
                %span.pinterest
                  = render '/common/pinit_button'
                %span.facebook
                  = render '/common/facebook_like_button'
              .mau_buttons
                - if !current_user || (@art_piece.artist != current_user)
                  %a.favorite_this{:href => "#", :fav_type => "ArtPiece", :fav_id => @art_piece.id, :title => "Add this art piece to your favorites"}
                    #num_favorites{ "ng-bind" => "currentArtPiece.favorites.count" }
                    .micro-icon.heart
            - if Conf.show_lightbox_feature
              .zoom-corner
                %a{:class => 'zoom', :href => @art_piece.zoomed, :title => @art_piece.title}
                  %img.zoom{:src => '/images/icons/zoom_corner.png'}

          .art-piece-info{:style => @art_piece.css_width}
            .basic
              .entry#ap_medium{'ng-show' => 'currentArtPiece.medium'}
                Medium:
                %a{"ng-href"=>"/media/{{currentArtPiece.medium.id}}"}
                  {{currentArtPiece.medium.name}}
              .entry#ap_dimensions{'ng-show' => 'currentArtPiece.dimensions'}
                Dimensions:
                {{currentArtPiece.dimensions}}
              .entry#ap_year{'ng-show' => 'currentArtPiece.year'}
                Created:
                {{currentArtPiece.year}}
            #ap_tags{"ng-show" => 'hasTags()'}
              Tags:
              %span{"ng-repeat" => "tag in currentArtPiece.tags"}
                %a.tag{"ng-href"=>"/art_piece_tags/{{tag.id}}"} 
                  {{tag.name}}


          .edit-buttons
            .stuff {{currentArtPiece}}
            - if logged_in? and current_user == artist
              %span#artpiece_edit
                %a{"ng-href" => @art_piece.edit_path} edit
              %span#artpiece_del
                %a{"ng-href" => @art_piece.path, "data-confirm" => 'You are about to remove this art piece from your collection.  Are you sure you want to do that?', "data-method" => "delete", "rel" => "nofollow"} delete

