- event_classes = [event.publish ? 'published':'unpublished']
- if event.in_progress?
  - event_classes << 'in_progress'
- if event.future?
  - event_classes << 'future'
- if event.past?
  - event_classes << 'past'

.event{:class => event_classes.join(' ')}
  .title 
    #{event.title}
    .time #{EventsHelper::event_time(event)}
    .reception_time #{EventsHelper::reception_time(event)}
  
  .venue
    .name #{event.venue}
    .address 
      - address_hash = event.address_hash[:parsed]
      - txt = [address_hash[:street], address_hash[:city]]
      - txt << address_hash[:state] if address_hash[:state].downcase != 'ca'
      - txt << address_hash[:zip] if address_hash[:zip] != '94110'
      = txt.join ' '
      .maplink 
        %a{:target => '_blank', :href => event.map_link} (map)
  .clear        
  .desc.markdown #{markdown(event.description)}
  .url
    - if event.url.present?
      Event Website:
      - url = event.url
      - unless /http[s?]:\/\// =~ event.url
        - url = 'http://' + event.url
      %a{:href => url} #{event.url}
    .ctrls
      - if event.publish
        = link_to 'unpublish', unpublish_event_path(event)
      - else
        = link_to 'publish', publish_event_path(event)
      = link_to 'edit', edit_event_path(event)
      = link_to 'delete', event, :confirm => 'Are you sure?', :method => :delete 
